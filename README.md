# 비트코인 고래 거래 탐지 시스템 (Bitcoin Whale Transaction Detection)

## 개발 규칙

### 커밋 룰

- 모든 커밋 메시지는 다음 형식을 따릅니다: `type: subject`
- 타입 종류:
  - `feat`: 새로운 기능 추가
  - `fix`: 버그 수정
  - `docs`: 문서 수정
  - `style`: 코드 스타일 변경 (기능에 영향을 주지 않는 변경)
  - `refactor`: 코드 리팩토링
  - `test`: 테스트 코드 추가 및 수정
  - `chore`: 빌드 프로세스 또는 도구 변경
- 예시: `feat: LSTM Autoencoder 모델 구현`

### 브랜치 룰

- `main`: 제품 출시 가능한 브랜치, 항상 안정적인 상태 유지
- `develop`: 개발 브랜치, 다음 릴리스를 위한 기능 통합
- 기능 브랜치: `feature/기능명`
- 버그 수정: `fix/버그명`
- 핫픽스: `hotfix/이슈명`

### PR(Pull Request) 룰

- PR 제목은 커밋 메시지와 동일한 형식으로 작성
- PR 본문에는 변경 사항에 대한 상세 설명 포함
- 코드 리뷰 후 승인 받은 PR만 머지 가능
- 머지 전 충돌 해결 및 테스트 통과 필수


## 📌 프로젝트 개요

본 프로젝트는 **비트코인 거래 데이터**를 분석하여 고래(대규모 자산 보유자)의 의심스러운 거래 패턴을 탐지하는 시스템을 개발하는 것을 목표로 합니다.  
지도 학습 및 규칙 기반 라벨링 기법을 통해 **고래 유형을 자동 분류**하고,  
XGBoost 모델 기반의 예측 시스템과 통계 분석 모듈을 구축합니다.

---

## 🎯 배경 및 목적

- 암호화폐 시장에서 고래의 대규모 거래는 **시장 가격에 큰 영향을 미침**
- 고래 거래의 탐지 및 유형 분석은 시장 조작, 시세 급변, 세탁 거래 등의 조기 감지에 유리함
- 비트코인 온체인 데이터를 기반으로 거래 특성에 따라 **여러 유형의 고래를 분류**
- 라벨링된 데이터를 바탕으로 지도 학습 모델을 훈련시켜, **실시간 고래 예측 가능**

---

## ✅ 주요 목표

1. **비트코인 고래 유형 자동 분류 시스템 구축**
   - 거래 구조(입력/출력 수, 금액 등)를 바탕으로 고래 유형 3종 분류
   - 규칙 기반 라벨링 및 XGBoost 분류 모델 학습

2. **분류 모델 성능 평가 및 시각화**
   - 모델 성능(Classification Report)을 기반으로 라벨링 정확도 분석
   - 고래별 통계 집계 및 거래 유형 시각화

3. **실시간 확장성 고려**
   - 추후 실시간 트랜잭션 모니터링을 위한 모델 예측 기반 구조 설계

---

## 🧠 고래 유형 정의 (`whale_type`)

| 라벨 | 유형 | 설명 |
|------|------|------|
| 0 | normal | 일반 거래 (고래 아님) |
| 1 | less_output_whale | 입금이 많고 출력이 소수인 고래 (소수 지갑으로 집중 송금) |
| 2 | less_input_whale | 입력이 적고 출력이 많은 고래 (분산 송금) |
| 3 | fast_transfer_whale | 수수료를 과도하게 지불하며 빠르게 이동 |


---

## 🧩 시스템 구성 요소

1. **데이터 수집**
   - Binance API 또는 온체인 데이터셋 활용
   - `BTC_1m.csv` 등 CSV 기반

2. **라벨링 모듈 (`label_stats.py`)**
   - 규칙 기반으로 거래 유형 분류 및 라벨링
   - `labeled_whales.csv` 저장
   - 라벨링된 데이터에서 고래 거래만 필터링
   - 유형별 거래 비중/건수 시각화

3. **머신러닝 분류기 (`train.py`)**
   - XGBoost 기반 지도 학습 분류기 학습
   - `dog.joblib`로 모델 저장

4. **예측 및 평가 (`test`)**
   - 테스트 데이터셋에 대해 예측 수행
   - 규칙 기반 라벨과 예측 결과 비교

---

## 📦 사용 방법

1. **라벨링 실행**
   python scripts/label_stats.py
2. **모델 학습**
   python scripts/train.py
3. **테스트**
   python scripts/test.py

4. **실시간 서버 실행**
   - `python scripts/server.py` 명령으로 FastAPI 서버 실행
   - 동작 원리는 `SERVER_OVERVIEW.md` 문서 참고
