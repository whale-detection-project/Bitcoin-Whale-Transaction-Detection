# 비트코인 고래 거래 탐지 시스템 (Bitcoin Whale Transaction Detection)

## 개발 규칙

### 커밋 룰

- 모든 커밋 메시지는 다음 형식을 따릅니다: `type: subject`
- 타입 종류:
  - `feat`: 새로운 기능 추가
  - `fix`: 버그 수정
  - `docs`: 문서 수정
  - `style`: 코드 스타일 변경 (기능에 영향을 주지 않는 변경)
  - `refactor`: 코드 리팩토링
  - `test`: 테스트 코드 추가 및 수정
  - `chore`: 빌드 프로세스 또는 도구 변경
- 예시: `feat: LSTM Autoencoder 모델 구현`

### 브랜치 룰

- `main`: 제품 출시 가능한 브랜치, 항상 안정적인 상태 유지
- `develop`: 개발 브랜치, 다음 릴리스를 위한 기능 통합
- 기능 브랜치: `feature/기능명`
- 버그 수정: `fix/버그명`
- 핫픽스: `hotfix/이슈명`

### PR(Pull Request) 룰

- PR 제목은 커밋 메시지와 동일한 형식으로 작성
- PR 본문에는 변경 사항에 대한 상세 설명 포함
- 코드 리뷰 후 승인 받은 PR만 머지 가능
- 머지 전 충돌 해결 및 테스트 통과 필수


# 🐋 비트코인 고래 거래 탐지 시스템 (Bitcoin Whale Transaction Detection)

## 📌 프로젝트 개요

비트코인 온체인 트랜잭션 데이터를 기반으로 대규모 자산 이동(고래)의 이상 거래를 탐지합니다.  
**KMeans 클러스터링**을 통한 고래 유형 라벨링 후, **XGBoost 분류 모델**로 지도 학습을 수행하여  
실시간으로 고래 유형을 분류하고 시각화할 수 있는 시스템입니다.

---

## 🎯 프로젝트 목적

- 암호화폐 시장에서 **고래의 대규모 이동**은 가격에 직접적인 영향을 미침
- 고래 유형을 사전에 탐지하면 **시장 조작 및 세탁 가능성을 조기 감지**할 수 있음
- **비지도 클러스터링(KMeans)** + **지도 학습(XGBoost)**을 결합한 복합 탐지 파이프라인 구현
- 향후 실시간 Binance WebSocket 연결을 통한 확장 고려

---

## ✅ 주요 기능

1. **고래 유형 자동 라벨링**
   - KMeans 클러스터링으로 `input_count`, `output_count`, `max_output_ratio` 등 기반 자동 분류

2. **XGBoost 모델 학습**
   - `mlogloss` 평가 기준 기반 고성능 다중 클래스 분류
   - 수동 클래스 가중치 부여로 불균형 개선

3. **테스트 및 시각화**
   - 전체 테스트셋에 대해 클러스터 기반 라벨 예측
   - Confusion Matrix, Classification Report, PCA 시각화 제공

4. **클러스터 중심 해석**
   - 각 클러스터의 평균 특징 복원 및 의미 추론

---

## 🧠 고래 유형 정의 (`cluster_label`)

| 라벨 | 설명 |
|------|------|
| 0 | **입력 2+, 출력 5+** → 중간 다수 출력형 / 지갑 리밸런싱 추정 |
| 1 | **단일 입력 → 단일 출력** → 콜드월렛 이체 or 소수 정형 전송 |
| 2 | **입력 20+ → 출력 1~2** → 입력 병합형, Mixing 전 조짐 |
| 3 | **입력 1~2 → 출력 20+** → 다중 분산형, 세탁 / 거래소 출금 의심 |

---

## 🧩 시스템 구성 요소

| 구성 요소 | 설명 |
|-----------|------|
| `1000btc_train.csv` | 학습용 대규모 트랜잭션 데이터 (1000 BTC 이상) |
| `train.py` | KMeans 라벨 생성 및 XGBoost 분류기 학습 |
| `test.py` | 전체 테스트셋 기반 분류 성능 평가 |
| `model/` | 학습된 모델, 스케일러, KMeans, PCA 저장 폴더 |

---

## 🚀 사용 방법

```bash
# 1. 모델 학습 (클러스터링 + 분류)
python train.py

# 2. 전체 테스트셋에 대해 평가
python test.py

